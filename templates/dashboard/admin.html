{% extends "base.html" %}
{% load humanize %}
{% block page_title %}<h5>대시보드</h5>{% endblock %}

{% block extra_css %}
<style>
    .dash-stat {
        background: #fff;
        border: 1px solid var(--toss-gray-200);
        border-radius: 16px;
        padding: 22px 24px;
        display: flex;
        align-items: flex-start;
        gap: 16px;
        transition: all 0.15s;
    }
    .dash-stat:hover {
        border-color: var(--toss-blue);
        box-shadow: 0 4px 16px rgba(49, 130, 246, 0.06);
    }
    .dash-stat-icon {
        width: 46px; height: 46px;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        flex-shrink: 0;
    }
    .dash-stat-info { flex: 1; }
    .dash-stat-label {
        font-size: 12px;
        font-weight: 500;
        color: var(--toss-gray-400);
        margin-bottom: 4px;
    }
    .dash-stat-value {
        font-size: 24px;
        font-weight: 800;
        color: var(--toss-gray-900);
        line-height: 1.2;
    }
    .dash-stat-value small {
        font-size: 13px;
        font-weight: 500;
        color: var(--toss-gray-400);
        margin-left: 2px;
    }
    .dash-stat-sub {
        font-size: 12px;
        font-weight: 500;
        color: var(--toss-gray-400);
        margin-top: 4px;
    }
</style>
{% endblock %}

{% block content %}
{% include "dashboard/_notices.html" %}
{% include "dashboard/_period_filter.html" %}

<div class="row g-3 mb-4">
    <div class="col-md-3">
        <div class="dash-stat">
            <div class="dash-stat-icon" style="background:#eef4ff;color:var(--toss-blue)">
                <i class="bi bi-people"></i>
            </div>
            <div class="dash-stat-info">
                <div class="dash-stat-label">전체 업체</div>
                <div class="dash-stat-value">{{ total_users }}</div>
                <div class="dash-stat-sub">책임자 {{ total_managers }} / 대행사 {{ total_agencies }} / 셀러 {{ total_sellers }}</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="dash-stat">
            <div class="dash-stat-icon" style="background:#e6f9f1;color:var(--toss-green)">
                <i class="bi bi-receipt"></i>
            </div>
            <div class="dash-stat-info">
                <div class="dash-stat-label">{{ period_label }} 주문</div>
                <div class="dash-stat-value">{{ period_orders }}<small>건</small></div>
                <div class="dash-stat-sub">{{ period_amount|floatformat:0|intcomma }}원</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="dash-stat">
            <div class="dash-stat-icon" style="background:#f3e8ff;color:#7c3aed">
                <i class="bi bi-box-seam"></i>
            </div>
            <div class="dash-stat-info">
                <div class="dash-stat-label">{{ period_label }} 물량</div>
                <div class="dash-stat-value">{{ period_items|floatformat:0|intcomma }}<small>타</small></div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="dash-stat">
            <div class="dash-stat-icon" style="background:#fff4e6;color:#f59e0b">
                <i class="bi bi-exclamation-circle"></i>
            </div>
            <div class="dash-stat-info">
                <div class="dash-stat-label">접수 대기</div>
                <div class="dash-stat-value" style="color:#f59e0b">{{ pending_orders }}</div>
                <div class="dash-stat-sub">확인 필요</div>
            </div>
        </div>
    </div>
</div>

{% include "dashboard/_stats_common.html" %}
{% include "dashboard/_recent_orders.html" with show_user_col=True user_col_label="업체" %}
{% endblock %}
