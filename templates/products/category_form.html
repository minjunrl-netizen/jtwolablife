{% extends "base.html" %}
{% block page_title %}<h5>{{ title }}</h5>{% endblock %}

{% block content %}
<div class="toss-card" style="max-width:600px">
    <div class="card-body">
        <form method="post">
            {% csrf_token %}

            <div class="mb-3">
                <label class="toss-label">카테고리명</label>
                {{ form.name }}
                {% if form.name.errors %}<div style="color:var(--toss-red);font-size:12px;margin-top:4px">{{ form.name.errors.0 }}</div>{% endif %}
            </div>

            <div class="mb-3">
                <label class="toss-label">아이콘 (Bootstrap Icons 클래스)</label>
                <div class="d-flex align-items-center gap-3">
                    {{ form.icon }}
                    <div id="iconPreview" style="font-size:28px;color:var(--toss-blue);min-width:40px;text-align:center">
                        <i class="bi {{ form.icon.value|default:'bi-grid' }}"></i>
                    </div>
                </div>
                <div style="font-size:12px;color:var(--toss-gray-400);margin-top:4px">
                    예: bi-geo-alt, bi-shop, bi-bag, bi-cart, bi-instagram
                </div>
                {% if form.icon.errors %}<div style="color:var(--toss-red);font-size:12px;margin-top:4px">{{ form.icon.errors.0 }}</div>{% endif %}
            </div>

            <div class="mb-3">
                <label class="toss-label">표시 순서</label>
                {{ form.display_order }}
                {% if form.display_order.errors %}<div style="color:var(--toss-red);font-size:12px;margin-top:4px">{{ form.display_order.errors.0 }}</div>{% endif %}
            </div>

            <div class="mb-3">
                <div class="form-check">
                    {{ form.is_active }}
                    <label class="form-check-label" style="font-size:14px;font-weight:500">활성</label>
                </div>
            </div>

            <div class="d-flex gap-2">
                <button type="submit" class="btn-toss btn-toss-primary">저장</button>
                <a href="{% url 'products:category_list' %}" class="btn-toss btn-toss-light">취소</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// 아이콘 미리보기
const iconInput = document.getElementById('{{ form.icon.id_for_label }}');
if (iconInput) {
    iconInput.addEventListener('input', function() {
        const val = this.value.trim();
        document.getElementById('iconPreview').innerHTML = val ? `<i class="bi ${val}"></i>` : '';
    });
}
</script>
{% endblock %}
